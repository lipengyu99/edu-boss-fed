(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["role"],{"6c35":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("role-list")],1)},a=[],o=n("d4ec"),i=n("262e"),l=n("2caf"),c=n("9ab4"),s=n("1b40"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role-list"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-form",{ref:"form",attrs:{model:e.form,inline:!0}},[n("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:e.onSubmit}},[e._v("查询搜索")]),n("el-button",{attrs:{disabled:e.loading},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),n("el-button",{staticClass:"btn",on:{click:e.handleAdd}},[e._v("添加角色")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.roles,stripe:""}},[n("el-table-column",{attrs:{prop:"id",label:"编号"}}),n("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),n("el-table-column",{attrs:{prop:"description",label:"描述"}}),n("el-table-column",{attrs:{prop:"createdTime",label:"添加时间"}}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.$router.push({name:"alloc-menu",params:{roleId:t.row.id}})}}},[e._v("分配菜单")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.$router.push({name:"alloc-resource",params:{roleId:t.row.id}})}}},[e._v("分配资源")])],1),n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:e.isEdit?"编辑角色":"添加角色",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?n("create-or-edit",{attrs:{"role-id":e.roleId,"is-edit":e.isEdit},on:{success:e.onSuccess,cancel:function(t){e.dialogVisible=!1}}}):e._e()],1)],1)},d=[],b=n("1da1"),f=n("bee2"),m=(n("b0c0"),n("96cf"),n("dc83")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",[n("el-form-item",{attrs:{label:"角色名称"}},[n("el-input",{model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),n("el-form-item",{attrs:{label:"角色编码"}},[n("el-input",{model:{value:e.role.code,callback:function(t){e.$set(e.role,"code",t)},expression:"role.code"}})],1),n("el-form-item",{attrs:{label:"角色描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.role.description,callback:function(t){e.$set(e.role,"description",t)},expression:"role.description"}})],1),n("el-form-item",[n("el-button",{on:{click:function(t){return e.$emit("cancel")}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")])],1)],1)],1)},h=[],v=function(e){Object(i["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.role={code:"",name:"",description:""},e}return Object(f["a"])(n,[{key:"created",value:function(){this.isEdit&&this.loadRole()}},{key:"loadRole",value:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["e"])(this.roleId);case 2:t=e.sent,n=t.data,this.role=n.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmit",value:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["b"])(this.role);case 2:this.$message.success("操作成功"),this.$emit("success");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(s["c"]);Object(c["a"])([Object(s["b"])()],v.prototype,"roleId",void 0),Object(c["a"])([Object(s["b"])({default:!1})],v.prototype,"isEdit",void 0),v=Object(c["a"])([s["a"]],v);var O=v,j=O,g=n("2877"),y=Object(g["a"])(j,p,h,!1,null,"6bea143e",null),k=y.exports,w=function(e){Object(i["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.roles=[],e.form={current:1,size:50,name:""},e.loading=!1,e.dialogVisible=!1,e.roleId=null,e.isEdit=!1,e}return Object(f["a"])(n,[{key:"created",value:function(){this.loadRoles()}},{key:"loadRoles",value:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(m["f"])(this.form);case 3:t=e.sent,n=t.data,this.roles=n.data.records,this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmit",value:function(){this.loadRoles()}},{key:"handleEdit",value:function(e){this.dialogVisible=!0,this.roleId=e.id,this.isEdit=!0}},{key:"handleDelete",value:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$confirm("确认删除角色：".concat(t.name,"？"),"删除提示");case 3:return e.next=5,Object(m["c"])(t.id);case 5:this.$message.success("删除成功"),this.loadRoles(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),e.t0&&e.t0.response?this.$message.error("删除失败，请重试"):this.$message.info("取消删除");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onReset",value:function(){this.$refs.form.resetFields(),this.loadRoles()}},{key:"onSuccess",value:function(){this.dialogVisible=!1,this.loadRoles()}},{key:"handleAdd",value:function(){this.isEdit=!1,this.dialogVisible=!0}}]),n}(s["c"]);w=Object(c["a"])([Object(s["a"])({components:{CreateOrEdit:k}})],w);var x=w,R=x,E=(n("f250"),Object(g["a"])(R,u,d,!1,null,"8ccce8de",null)),$=E.exports,_=function(e){Object(i["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(s["c"]);_=Object(c["a"])([Object(s["a"])({components:{RoleList:$}})],_);var S=_,T=S,V=Object(g["a"])(T,r,a,!1,null,"7bbd6444",null);t["default"]=V.exports},"9f25":function(e,t,n){},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,o=Function.prototype,i=o.toString,l=/^\s*function ([^ (]*)/,c="name";r&&!(c in o)&&a(o,c,{configurable:!0,get:function(){try{return i.call(this).match(l)[1]}catch(e){return""}}})},dc83:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return u}));var r=n("b32d"),a=function(e){return Object(r["a"])({method:"POST",url:"/boss/role/getRolePages",data:e})},o=function(e){return Object(r["a"])({method:"DELETE",url:"/boss/role/".concat(e)})},i=function(e){return Object(r["a"])({method:"POST",url:"/boss/role/saveOrUpdate",data:e})},l=function(e){return Object(r["a"])({method:"GET",url:"/boss/role/".concat(e)})},c=function(){return Object(r["a"])({method:"GET",url:"/boss/role/all"})},s=function(e){return Object(r["a"])({method:"POST",url:"/boss/role/allocateUserRoles",data:e})},u=function(e){return Object(r["a"])({method:"GET",url:"/boss/role/user/".concat(e)})}},f250:function(e,t,n){"use strict";n("9f25")}}]);
//# sourceMappingURL=role.82d89431.js.map