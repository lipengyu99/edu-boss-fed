(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["alloc-menu"],{2909:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){if(Array.isArray(e))return n(e)}r.d(t,"a",(function(){return s}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r("fb6a"),r("b0c0");function o(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return c(e)||a(e)||o(e)||u()}},"2ef8":function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return i}));var n=r("b32d"),c=function(e){return Object(n["a"])({method:"POST",url:"/boss/resource/getResourcePages",data:e})},a=function(){return Object(n["a"])({method:"GET",url:"/boss/resource/getAll"})},o=function(e){return Object(n["a"])({method:"POST",url:"/boss/resource/allocateRoleResources",data:e})},u=function(e){return Object(n["a"])({method:"GET",url:"/boss/resource/getRoleResources",params:{roleId:e}})},s=function(e){return Object(n["a"])({method:"POST",url:"/boss/resource/saveOrUpdate",data:e})},i=function(e){return Object(n["a"])({method:"DELETE",url:"/boss/resource/".concat(e)})}},"4df4":function(e,t,r){"use strict";var n=r("0366"),c=r("7b0b"),a=r("9bdd"),o=r("e95a"),u=r("50c4"),s=r("8418"),i=r("35a1");e.exports=function(e){var t,r,d,f,l,h,b=c(e),v="function"==typeof this?this:Array,p=arguments.length,y=p>1?arguments[1]:void 0,m=void 0!==y,g=i(b),O=0;if(m&&(y=n(y,p>2?arguments[2]:void 0,2)),void 0==g||v==Array&&o(g))for(t=u(b.length),r=new v(t);t>O;O++)h=m?y(b[O],O):b[O],s(r,O,h);else for(f=g.call(b),l=f.next,r=new v;!(d=l.call(f)).done;O++)h=m?a(f,y,[d.value,O],!0):d.value,s(r,O,h);return r.length=O,r}},"7ca9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alloc-menu"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("分配菜单")])]),r("el-tree",{ref:"menu-tree",attrs:{data:e.menus,"node-key":"id",props:e.defaultProps,"default-checked-keys":e.checkedKeys,"show-checkbox":"","default-expand-all":""}}),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:e.resetChecked}},[e._v("清空")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1)],1)},c=[],a=r("2909"),o=r("1da1"),u=r("d4ec"),s=r("bee2"),i=r("262e"),d=r("2caf"),f=(r("159b"),r("99af"),r("96cf"),r("9ab4")),l=r("1b40"),h=r("932f"),b=function(e){Object(i["a"])(r,e);var t=Object(d["a"])(r);function r(){var e;return Object(u["a"])(this,r),e=t.apply(this,arguments),e.menus=[],e.defaultProps={children:"subMenuList",label:"name"},e.checkedKeys=[],e}return Object(s["a"])(r,[{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadMenus();case 2:this.loadRoleMenus();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadMenus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["f"])();case 2:t=e.sent,r=t.data,this.menus=r.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadRoleMenus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["g"])(this.roleId);case 2:t=e.sent,r=t.data,this.getCheckedKeys(r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCheckedKeys",value:function(e){var t=this;e.forEach((function(e){e.selected&&(t.checkedKeys=[].concat(Object(a["a"])(t.checkedKeys),[e.id])),e.subMenuList&&t.getCheckedKeys(e.subMenuList)}))}},{key:"onSave",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs["menu-tree"].getCheckedKeys(),e.next=3,Object(h["a"])({roleId:this.roleId,menuIdList:t});case 3:this.$message.success("操作成功"),this.$router.back();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetChecked",value:function(){this.$refs["menu-tree"].setCheckedKeys([])}}]),r}(l["c"]);Object(f["a"])([Object(l["b"])({required:!0})],b.prototype,"roleId",void 0),b=Object(f["a"])([l["a"]],b);var v=b,p=v,y=r("2877"),m=Object(y["a"])(p,n,c,!1,null,"39763c84",null);t["default"]=m.exports},"7db0":function(e,t,r){"use strict";var n=r("23e7"),c=r("b727").find,a=r("44d2"),o="find",u=!0;o in[]&&Array(1)[o]((function(){u=!1})),n({target:"Array",proto:!0,forced:u},{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},8418:function(e,t,r){"use strict";var n=r("c04e"),c=r("9bf2"),a=r("5c6c");e.exports=function(e,t,r){var o=n(t);o in e?c.f(e,o,a(0,r)):e[o]=r}},"932f":function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return u})),r.d(t,"f",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"g",(function(){return d}));var n=r("b32d"),c=function(e){return Object(n["a"])({method:"POST",url:"/boss/menu/saveOrUpdate",data:e})},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return Object(n["a"])({method:"GET",url:"/boss/menu/getEditMenuInfo",params:{id:e}})},o=function(){return Object(n["a"])({method:"GET",url:"/boss/menu/getAll"})},u=function(e){return Object(n["a"])({method:"DELETE",url:"/boss/menu/".concat(e)})},s=function(){return Object(n["a"])({method:"GET",url:"/boss/menu/getMenuNodeList"})},i=function(e){return Object(n["a"])({method:"POST",url:"/boss/menu/allocateRoleMenus",data:e})},d=function(e){return Object(n["a"])({method:"GET",url:"/boss/menu/getRoleMenus",params:{roleId:e}})}},9614:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alloc-resource"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("分配资源")])]),r("el-tree",{ref:"tree",attrs:{data:e.resources,"node-key":"id",props:e.defaultProps,"show-checkbox":"","default-checked-keys":e.defaultCheckedKeys,"default-expanded-keys":e.defaultCheckedKeys}}),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:e.resetChecked}},[e._v("清空")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1)],1)},c=[],a=r("2909"),o=r("1da1"),u=r("d4ec"),s=r("bee2"),i=r("262e"),d=r("2caf"),f=(r("96cf"),r("d3b7"),r("3ca3"),r("ddb0"),r("159b"),r("7db0"),r("99af"),r("9ab4")),l=r("1b40"),h=r("2ef8"),b=r("d771"),v=function(e){Object(i["a"])(r,e);var t=Object(d["a"])(r);function r(){var e;return Object(u["a"])(this,r),e=t.apply(this,arguments),e.resources=[],e.defaultProps={children:"children",label:"name"},e.defaultCheckedKeys=[],e}return Object(s["a"])(r,[{key:"created",value:function(){this.loadResources(),this.loadRoleResources()}},{key:"loadResources",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(h["c"])(),Object(b["b"])()]);case 2:t=e.sent,r=t[0].data.data,n=t[1].data.data,r.forEach((function(e){var t=n.find((function(t){return t.id===e.categoryId}));t&&(t.children=t.children||[],t.children.push(e))})),n.forEach((function(e){e.id=Math.random()})),this.resources=n;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadRoleResources",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["e"])(this.roleId);case 2:t=e.sent,r=t.data,this.getCheckedResources(r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCheckedResources",value:function(e){var t=this;e.forEach((function(e){e.resourceList&&e.resourceList.forEach((function(e){e.selected&&(t.defaultCheckedKeys=[].concat(Object(a["a"])(t.defaultCheckedKeys),[e.id]))}))}))}},{key:"onSave",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.tree.getCheckedNodes(),r=[],t.forEach((function(e){e.children||r.push(e.id)})),e.next=5,Object(h["a"])({roleId:this.roleId,resourceIdList:r});case 5:this.$message.success("保存成功"),this.$router.back();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetChecked",value:function(){this.$refs.tree.setCheckedKeys([])}}]),r}(l["c"]);Object(f["a"])([Object(l["b"])({required:!0})],v.prototype,"roleId",void 0),v=Object(f["a"])([l["a"]],v);var p=v,y=p,m=r("2877"),g=Object(m["a"])(y,n,c,!1,null,"b42b37c0",null);t["default"]=g.exports},"99af":function(e,t,r){"use strict";var n=r("23e7"),c=r("d039"),a=r("e8b5"),o=r("861d"),u=r("7b0b"),s=r("50c4"),i=r("8418"),d=r("65f0"),f=r("1dde"),l=r("b622"),h=r("2d00"),b=l("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",y=h>=51||!c((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),m=f("concat"),g=function(e){if(!o(e))return!1;var t=e[b];return void 0!==t?!!t:a(e)},O=!y||!m;n({target:"Array",proto:!0,forced:O},{concat:function(e){var t,r,n,c,a,o=u(this),f=d(o,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(a=-1===t?o:arguments[t],g(a)){if(c=s(a.length),l+c>v)throw TypeError(p);for(r=0;r<c;r++,l++)r in a&&i(f,l,a[r])}else{if(l>=v)throw TypeError(p);i(f,l++,a)}return f.length=l,f}})},"9bdd":function(e,t,r){var n=r("825a"),c=r("2a62");e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(o){throw c(e),o}}},a630:function(e,t,r){var n=r("23e7"),c=r("4df4"),a=r("1c7e"),o=!a((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:o},{from:c})},b0c0:function(e,t,r){var n=r("83ab"),c=r("9bf2").f,a=Function.prototype,o=a.toString,u=/^\s*function ([^ (]*)/,s="name";n&&!(s in a)&&c(a,s,{configurable:!0,get:function(){try{return o.call(this).match(u)[1]}catch(e){return""}}})},d771:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return o}));var n=r("b32d"),c=function(){return Object(n["a"])({method:"GET",url:"/boss/resource/category/getAll"})},a=function(e){return Object(n["a"])({method:"POST",url:"/boss/resource/category/saveOrderUpdate",data:e})},o=function(e){return Object(n["a"])({method:"DELETE",url:"/boss/resource/category/".concat(e)})}},fb6a:function(e,t,r){"use strict";var n=r("23e7"),c=r("861d"),a=r("e8b5"),o=r("23cb"),u=r("50c4"),s=r("fc6a"),i=r("8418"),d=r("b622"),f=r("1dde"),l=f("slice"),h=d("species"),b=[].slice,v=Math.max;n({target:"Array",proto:!0,forced:!l},{slice:function(e,t){var r,n,d,f=s(this),l=u(f.length),p=o(e,l),y=o(void 0===t?l:t,l);if(a(f)&&(r=f.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?c(r)&&(r=r[h],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return b.call(f,p,y);for(n=new(void 0===r?Array:r)(v(y-p,0)),d=0;p<y;p++,d++)p in f&&i(n,d,f[p]);return n.length=d,n}})}}]);
//# sourceMappingURL=alloc-menu.1a4732a2.js.map